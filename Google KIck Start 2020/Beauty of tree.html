
<!-- saved from url=(0038)data:text/html, <html contenteditable> -->
<html contenteditable=""><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"></head><body><div><br></div><div><header class="competition-nav mdc-top-app-bar" style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.87); display: flex; position: fixed; flex-direction: column; justify-content: space-between; box-sizing: border-box; width: 1366px; z-index: 4; min-height: 4rem; box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 6px 0px; font-family: &quot;Google Sans&quot;, Roboto, &quot;Helvetica Neue&quot;, sans-serif; font-size: 16px;"><div role="progressbar" class="mdc-linear-progress competition-interface-nav-progress-bar mdc-linear-progress--reversed" style="position: relative; width: 1366px; height: 8px; transform: translateZ(0px); transition: opacity 250ms cubic-bezier(0.4, 0, 0.6, 1) 0s; overflow: hidden;"><div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar" style="position: absolute; width: 1366px; height: 8px; animation: 0s ease 0s 1 normal none running primary-indeterminate-translate-reverse; transform-origin: right center; transition: transform 250ms cubic-bezier(0.4, 0, 0.6, 1) 0s; transform: scaleX(0.569722); right: 0px;"><span class="mdc-linear-progress__bar-inner" style="display: inline-block; position: absolute; width: 1366px; height: 8px; animation: 0s ease 0s 1 normal none running none; background-color: rgb(246, 174, 169);"></span></div><div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar" style="position: absolute; width: 1366px; height: 8px; animation: 0s ease 0s 1 normal none running secondary-indeterminate-translate-reverse; transform-origin: right center; transition: transform 250ms cubic-bezier(0.4, 0, 0.6, 1) 0s; visibility: hidden; right: 0px;"><span class="mdc-linear-progress__bar-inner" style="display: inline-block; position: absolute; width: 1366px; height: 8px; animation: 0s ease 0s 1 normal none running none; background-color: rgb(246, 174, 169);"></span></div></div></header><div style="color: rgb(32, 33, 36); font-family: &quot;Google Sans&quot;, Roboto, &quot;Helvetica Neue&quot;, sans-serif; font-size: 16px;"></div><section tabindex="0" class="competition-interface-section interface pane-interface mdc-top-app-bar--fixed-adjust" style="padding-top: 64px; box-sizing: border-box; height: 663px; display: flex; color: rgb(32, 33, 36); font-family: &quot;Google Sans&quot;, Roboto, &quot;Helvetica Neue&quot;, sans-serif; font-size: 16px;"><div id="pane-interface__left" tabindex="0" span="6" class="pane-interface__left" style="display: flex; flex: 2 1 50%; flex-direction: column; box-sizing: border-box; padding: 2rem 4rem; overflow-y: scroll; height: 599px;"><div class="problem-header" style="display: inline-block;"><div class="mdc-select mdc-ripple-upgraded" style="--mdc-ripple-fg-size:322px; --mdc-ripple-left:0; --mdc-ripple-top:0; --mdc-ripple-fg-scale:1.71089; --mdc-ripple-fg-translate-end:108px, -133px; --mdc-ripple-fg-translate-start:-160px, -141px; -webkit-tap-highlight-color: transparent; display: inline-flex; position: relative; box-sizing: border-box; height: 56px; overflow: hidden; will-change: opacity, transform, color; border-radius: 4px 4px 0px 0px; width: 538px; background-color: rgb(255, 255, 255);"><i class="mdc-select__dropdown-icon" style="background: url(&quot;data:image/svg+xml,%3Csvg%20width%3D%2210px%22%20height%3D%225px%22%20viewBox%3D%227%2010%2010%205%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3Cpolygon%20id%3D%22Shape%22%20stroke%3D%22none%22%20fill%3D%22%23000%22%20fill-rule%3D%22evenodd%22%20opacity%3D%220.54%22%20points%3D%227%2010%2012%2015%2017%2010%22%3E%3C%2Fpolygon%3E%0A%3C%2Fsvg%3E&quot;) center center no-repeat; left: auto; right: 8px; position: absolute; bottom: 16px; width: 24px; height: 24px; transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0s; pointer-events: none; color: rgb(66, 133, 244);"></i><div id="problem-select-selected-text" aria-labelledby="problem-select-selected-text" role="button" aria-haspopup="listbox" class="mdc-select__selected-text" tabindex="0" aria-invalid="false" style="min-width: 200px; padding: 20px 52px 4px 16px; font-family: &quot;Google Sans&quot;; -webkit-font-smoothing: antialiased; font-size: 1.75rem; line-height: 1.75rem; letter-spacing: 0.00937em; text-decoration: inherit; text-transform: inherit; box-sizing: border-box; width: 538px; height: 56px; border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1px solid rgba(0, 0, 0, 0.42); outline: 0px; background-color: transparent; color: rgba(0, 0, 0, 0.87); white-space: nowrap; cursor: pointer;">Beauty of tree (13pts, 19pts)</div><div class="mdc-line-ripple" style="position: absolute; bottom: 0px; left: 0px; width: 538px; height: 2px; transform: scaleX(0); transition: transform 180ms cubic-bezier(0.4, 0, 0.2, 1) 0s, opacity 180ms cubic-bezier(0.4, 0, 0.2, 1) 0s; opacity: 0; z-index: 2; transform-origin: 1px center;"></div></div><p id="problem-select-helper-text" aria-hidden="true" class="mdc-select-helper-text mdc-select-helper-text--validation-msg" style="line-height: normal; margin: 0px 12px; padding: 0px; -webkit-font-smoothing: antialiased; font-family: &quot;Google Sans&quot;; font-size: 0.75rem; letter-spacing: 0.03333em; color: rgba(0, 0, 0, 0.6); text-decoration: inherit; text-transform: inherit; transition: opacity 180ms cubic-bezier(0.4, 0, 0.2, 1) 0s; opacity: 0; will-change: opacity;"></p></div><div id="competitive-submissions" class="problem-submissions" style="margin: 2rem 0px;"><h4 class="headline-4" style="line-height: 1.75rem; margin: 0px; padding: 0px; font-family: &quot;Google Sans&quot;; -webkit-font-smoothing: antialiased; font-size: 1.25rem; font-weight: 300;">Competitive Submissions</h4><div class="attempt-list" style="list-style-type: none; padding: 0px; overflow-y: auto; max-height: 325px;"><div class="attempt" style="box-sizing: border-box; height: 65px; display: flex; flex-direction: row; width: 538px; justify-content: space-between; border-bottom: none; align-items: center; padding: 0.5rem; cursor: pointer;"><span class="grey" style="color: rgb(112, 117, 122);">You have not attempted this problem.</span></div></div></div><p class="form-label" style="line-height: 1.25rem; margin: 8px 16px 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-family: &quot;Google Sans&quot;; font-size: 0.875rem; letter-spacing: 0.1px; color: rgb(95, 99, 104);">Last updated: Jul 12 2020, 10:30</p><div class="problem-description problem-analysis-detail" style="max-width: 100%; margin: 1rem auto 0px;"><div class="problem-statement-string" style="-webkit-font-smoothing: antialiased; font-family: Roboto; font-size: 1rem; line-height: 1.5rem; letter-spacing: 0.1px; max-width: 1200px;"><h3 style="line-height: 1.75rem; margin: 1rem 0px 0px; padding: 0px; font-family: &quot;Google Sans&quot;; -webkit-font-smoothing: antialiased; font-size: 1.25rem; font-weight: 300;">Problem</h3><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;">Amadea and Bilva are decorating a rooted tree containing&nbsp;<b>N</b>&nbsp;nodes, labelled from 1 to&nbsp;<b>N</b>. Node 1 is the root of the tree, and all other nodes have a node with a numerically smaller label as their parent.</p><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;">Amadea and Bilva's decorate the tree as follows:</p><ul style="margin: 0px; padding: 1rem 0px 0px 1rem; list-style-position: outside;"><li>Amadea picks a node of the tree uniformly at random and paints it. Then, she travels up the tree painting every&nbsp;<b>A</b>-th node until she reaches the root.</li><li>Bilva picks a node of the tree uniformly at random and paints it. Then, she travels up the tree painting every&nbsp;<b>B</b>-th node until she reaches the root.</li></ul><p></p><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;">The&nbsp;<i>beauty</i>&nbsp;of the tree is equal to the number of nodes painted&nbsp;<i>at least once</i>&nbsp;by either Amadea or Bilva. Note that even if they both paint a node, it only counts once.</p><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;">What is the&nbsp;<a href="https://en.wikipedia.org/wiki/Expected_value" style="color: rgb(25, 103, 210); text-decoration-line: none; transition: color 0.15s ease 0s;">expected</a>&nbsp;beauty of the tree?</p><h3 style="line-height: 1.75rem; margin: 1rem 0px 0px; padding: 0px; font-family: &quot;Google Sans&quot;; -webkit-font-smoothing: antialiased; font-size: 1.25rem; font-weight: 300;">Input</h3><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;">The first line of the input gives the number of test cases,&nbsp;<b>T</b>.&nbsp;<b>T</b>&nbsp;test cases follow. Each test case begins with a line containing the three integers&nbsp;<b>N</b>,&nbsp;<b>A</b>&nbsp;and&nbsp;<b>B</b>. The second line contains&nbsp;<b>N</b>-1 integers. The i-th integer is the parent of node i+1.</p><h3 style="line-height: 1.75rem; margin: 1rem 0px 0px; padding: 0px; font-family: &quot;Google Sans&quot;; -webkit-font-smoothing: antialiased; font-size: 1.25rem; font-weight: 300;">Output</h3><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;">For each test case, output one line containing&nbsp;<code>Case #x: y</code>, where&nbsp;<code>x</code>&nbsp;is the test case number (starting from 1) and&nbsp;<code>y</code>&nbsp;is the expected beauty of the tree.</p><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;"><code>y</code>&nbsp;will be considered correct if it is within an absolute or relative error of 10<sup>-6</sup>&nbsp;of the correct answer. See the&nbsp;<a href="https://codejam.withgoogle.com/codejam/resources/faq#real-number-behavior" style="color: rgb(25, 103, 210); text-decoration-line: none; transition: color 0.15s ease 0s;">FAQ</a>&nbsp;for an explanation of what that means, and what formats of real numbers we accept.</p><h3 style="line-height: 1.75rem; margin: 1rem 0px 0px; padding: 0px; font-family: &quot;Google Sans&quot;; -webkit-font-smoothing: antialiased; font-size: 1.25rem; font-weight: 300;">Limits</h3><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;">Memory limit: 1GB.<br>1 &#8804;&nbsp;<b>T</b>&nbsp;&#8804; 100.<br>1 &#8804;&nbsp;<b>A</b>&nbsp;&#8804;&nbsp;<b>N</b>.<br>1 &#8804;&nbsp;<b>B</b>&nbsp;&#8804;&nbsp;<b>N</b>.<br></p><h4 style="line-height: 1.75rem; margin: 1rem 0px 0px; padding: 0px; font-family: &quot;Google Sans&quot;; -webkit-font-smoothing: antialiased; font-size: 1.25rem; font-weight: 300;">Test set 1</h4><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;">Time limit: 20 seconds.<br>1 &#8804;&nbsp;<b>N</b>&nbsp;&#8804; 100.<br></p><h4 style="line-height: 1.75rem; margin: 1rem 0px 0px; padding: 0px; font-family: &quot;Google Sans&quot;; -webkit-font-smoothing: antialiased; font-size: 1.25rem; font-weight: 300;">Test set 2</h4><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;">Time limit: 40 seconds.<br>For up to 5 cases, 1 &#8804;&nbsp;<b>N</b>&nbsp;&#8804; 5 × 10<sup>5</sup>.<br>For all other cases, 1 &#8804;&nbsp;<b>N</b>&nbsp;&#8804; 100.<br></p><h3 style="line-height: 1.75rem; margin: 1rem 0px 0px; padding: 0px; font-family: &quot;Google Sans&quot;; -webkit-font-smoothing: antialiased; font-size: 1.25rem; font-weight: 300;">Sample</h3><div class="problem-io-wrapper"><table style="border-spacing: 2rem 1rem;"><tbody><tr><td><br><span class="io-table-header">Input</span><br>&nbsp;</td><td><br><span class="io-table-header">Output</span><br>&nbsp;</td></tr><tr><td><pre class="io-content">3
8 2 3
1 1 3 4 4 3 4
10 3 4
1 1 1 1 1 1 1 1 1
4 3 1
1 2 3

  </pre></td><td><pre class="io-content">Case #1: 2.65625
Case #2: 1.9
Case #3: 2.875

  </pre></td></tr></tbody></table></div><p style="line-height: 1.5rem; margin: 1rem 0px 0px; padding: 0px; -webkit-font-smoothing: antialiased; font-size: 1rem; letter-spacing: 0.1px;">The trees for each sample case are shown in the diagram below.&nbsp;<img src="./Beauty of tree_files/sample.svg">&nbsp;A few example colourings for sample case #1 are shown below.</p><ul style="margin: 0px; padding: 1rem 0px 0px 1rem; list-style-position: outside;"><li>If Amadea picks node 5 and Bilva picks node 8, then together they paint 4 unique nodes: Amadea paints nodes 5 and 3, while Bilva paints nodes 8 and 1.</li><li>If Amadea picks node 7 and Bilva picks node 6, then together they paint 3 unique nodes: Amadea paints nodes 7 and 1, while Bilva paints nodes 6 and 1 (note that Amadea painted node 1 as well).</li></ul><img src="./Beauty of tree_files/sample1.svg"><p></p></div></div></div></section></div></body></html>